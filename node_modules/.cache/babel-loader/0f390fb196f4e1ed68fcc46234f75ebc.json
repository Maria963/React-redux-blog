{"ast":null,"code":"import _regeneratorRuntime from \"/home/cretrix/projects/react-blog/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/home/cretrix/projects/react-blog/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nvar _jsxFileName = \"/home/cretrix/projects/react-blog/src/utils/JWTAuth.js\";\nimport axios from 'axios';\nvar SERVER_URL = \"http://127.0.0.1:8000\";\nimport { Redirect } from \"react-router-dom\";\n\nvar login =\n/*#__PURE__*/\nfunction () {\n  var _ref = _asyncToGenerator(\n  /*#__PURE__*/\n  _regeneratorRuntime.mark(function _callee(data) {\n    var LOGIN_ENDPOINT, response, jwt, token;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            LOGIN_ENDPOINT = \"\".concat(SERVER_URL, \"/api/user/login\");\n            console.log('ddd');\n            _context.prev = 2;\n            _context.next = 5;\n            return axios.post(LOGIN_ENDPOINT, data);\n\n          case 5:\n            response = _context.sent;\n            console.log(response); //  if(response.status === 200 && response.data.remember_token && response.data.expireAt){\n\n            if (response.status === 200) {\n              jwt = response.data.data.remember_token; //  let expire_at = response.data.expireAt;\n\n              console.log(jwt);\n              token = localStorage.setItem(\"access_token\", jwt);\n              React.createElement(Redirect, {\n                to: {\n                  pathname: \"/create\" //  state: { token: token }\n\n                },\n                __source: {\n                  fileName: _jsxFileName,\n                  lineNumber: 18\n                },\n                __self: this\n              }); //  localStorage.setItem(\"expire_at\", expire_at);\n            }\n\n            _context.next = 13;\n            break;\n\n          case 10:\n            _context.prev = 10;\n            _context.t0 = _context[\"catch\"](2);\n            console.log(_context.t0);\n\n          case 13:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee, this, [[2, 10]]);\n  }));\n\n  return function login(_x) {\n    return _ref.apply(this, arguments);\n  };\n}();\n\nvar register =\n/*#__PURE__*/\nfunction () {\n  var _ref2 = _asyncToGenerator(\n  /*#__PURE__*/\n  _regeneratorRuntime.mark(function _callee2(data) {\n    var SIGNUP_ENDPOINT, response;\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            SIGNUP_ENDPOINT = \"\".concat(SERVER_URL, \"/api/user/register\");\n            _context2.prev = 1;\n            _context2.next = 4;\n            return axios({\n              method: 'post',\n              responseType: 'json',\n              url: SIGNUP_ENDPOINT,\n              data: data\n            });\n\n          case 4:\n            response = _context2.sent;\n            _context2.next = 10;\n            break;\n\n          case 7:\n            _context2.prev = 7;\n            _context2.t0 = _context2[\"catch\"](1);\n            console.log(_context2.t0);\n\n          case 10:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2, null, [[1, 7]]);\n  }));\n\n  return function register(_x2) {\n    return _ref2.apply(this, arguments);\n  };\n}();\n\nvar logout = function logout() {\n  localStorage.removeItem(\"access_token\"); // localStorage.removeItem(\"expire_at\");\n};\n\nexport { login, register, logout };","map":{"version":3,"sources":["/home/cretrix/projects/react-blog/src/utils/JWTAuth.js"],"names":["axios","SERVER_URL","Redirect","login","data","LOGIN_ENDPOINT","console","log","post","response","status","jwt","remember_token","token","localStorage","setItem","pathname","register","SIGNUP_ENDPOINT","method","responseType","url","logout","removeItem"],"mappings":";;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,IAAMC,UAAU,GAAG,uBAAnB;AACA,SAAUC,QAAV,QAAyB,kBAAzB;;AAEA,IAAMC,KAAK;AAAA;AAAA;AAAA;AAAA;AAAA,2BAAG,iBAAOC,IAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AACJC,YAAAA,cADI,aACgBJ,UADhB;AAEVK,YAAAA,OAAO,CAACC,GAAR,CAAY,KAAZ;AAFU;AAAA;AAAA,mBAKeP,KAAK,CAACQ,IAAN,CAAWH,cAAX,EAA2BD,IAA3B,CALf;;AAAA;AAKFK,YAAAA,QALE;AAMLH,YAAAA,OAAO,CAACC,GAAR,CAAYE,QAAZ,EANK,CAOR;;AACE,gBAAGA,QAAQ,CAACC,MAAT,KAAoB,GAAvB,EAA2B;AACnBC,cAAAA,GADmB,GACbF,QAAQ,CAACL,IAAT,CAAcA,IAAd,CAAmBQ,cADN,EAEzB;;AACEN,cAAAA,OAAO,CAACC,GAAR,CAAYI,GAAZ;AACME,cAAAA,KAJiB,GAITC,YAAY,CAACC,OAAb,CAAqB,cAArB,EAAqCJ,GAArC,CAJS;AAKzB,kCAAC,QAAD;AACE,gBAAA,EAAE,EAAE;AACFK,kBAAAA,QAAQ,EAAE,SADR,CAEJ;;AAFI,iBADN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBALyB,CAWzB;AAED;;AArBK;AAAA;;AAAA;AAAA;AAAA;AAyBNV,YAAAA,OAAO,CAACC,GAAR;;AAzBM;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAH;;AAAA,kBAALJ,KAAK;AAAA;AAAA;AAAA,GAAX;;AA8BA,IAAMc,QAAQ;AAAA;AAAA;AAAA;AAAA;AAAA,2BAAG,kBAAOb,IAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AACPc,YAAAA,eADO,aACcjB,UADd;AAAA;AAAA;AAAA,mBAGYD,KAAK,CAAC;AACvBmB,cAAAA,MAAM,EAAE,MADe;AAEvBC,cAAAA,YAAY,EAAE,MAFS;AAGvBC,cAAAA,GAAG,EAAEH,eAHkB;AAIvBd,cAAAA,IAAI,EAAEA;AAJiB,aAAD,CAHjB;;AAAA;AAGLK,YAAAA,QAHK;AAAA;AAAA;;AAAA;AAAA;AAAA;AAUTH,YAAAA,OAAO,CAACC,GAAR;;AAVS;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAH;;AAAA,kBAARU,QAAQ;AAAA;AAAA;AAAA,GAAd;;AAcA,IAAMK,MAAM,GAAG,SAATA,MAAS,GAAM;AACjBR,EAAAA,YAAY,CAACS,UAAb,CAAwB,cAAxB,EADiB,CAElB;AACF,CAHD;;AAMA,SAASpB,KAAT,EAAgBc,QAAhB,EAA0BK,MAA1B","sourcesContent":["import axios from 'axios';\nconst SERVER_URL = \"http://127.0.0.1:8000\";\nimport {  Redirect} from \"react-router-dom\";\n\nconst login = async (data) => {\n    const LOGIN_ENDPOINT = `${SERVER_URL}/api/user/login`;\n    console.log('ddd');\n    try {\n\n        let response = await axios.post(LOGIN_ENDPOINT, data);\n         console.log(response);\n      //  if(response.status === 200 && response.data.remember_token && response.data.expireAt){\n        if(response.status === 200){\n            let jwt = response.data.data.remember_token;\n          //  let expire_at = response.data.expireAt;\n            console.log(jwt);\n            const token = localStorage.setItem(\"access_token\", jwt);\n          <Redirect\n            to={{\n              pathname: \"/create\",\n            //  state: { token: token }\n            }}\n          />\n          //  localStorage.setItem(\"expire_at\", expire_at);\n\n        }\n\n\n    } catch(e){\n        console.log(e);\n    }\n}\n\n\nconst register = async (data) => {\n    const SIGNUP_ENDPOINT = `${SERVER_URL}/api/user/register`;\n    try {\n        let response = await axios({\n            method: 'post',\n            responseType: 'json',\n            url: SIGNUP_ENDPOINT,\n            data: data\n          });\n    } catch(e){\n        console.log(e);\n    }\n}\n\nconst logout = () => {\n    localStorage.removeItem(\"access_token\");\n   // localStorage.removeItem(\"expire_at\");\n}\n\n\nexport { login, register, logout }"]},"metadata":{},"sourceType":"module"}