{"ast":null,"code":"import _regeneratorRuntime from \"/home/cretrix/projects/React-blog/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/home/cretrix/projects/React-blog/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport axios from 'axios';\nvar SERVER_URL = \"http://127.0.0.1:8000\";\nvar SERVER_URL2 = \"http://127.0.0.1:8000\";\n\nvar login =\n/*#__PURE__*/\nfunction () {\n  var _ref = _asyncToGenerator(\n  /*#__PURE__*/\n  _regeneratorRuntime.mark(function _callee(data) {\n    var LOGIN_ENDPOINT, response, jwt;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            LOGIN_ENDPOINT = \"\".concat(SERVER_URL2, \"/api/login\");\n            console.log('ddd');\n            _context.prev = 2;\n            _context.next = 5;\n            return axios.post(LOGIN_ENDPOINT, data);\n\n          case 5:\n            response = _context.sent;\n            console.log(response.data.success); //  if(response.status === 200 && response.data.remember_token && response.data.expireAt){\n\n            if (!(response.status === 200 && response.data.success === true)) {\n              _context.next = 15;\n              break;\n            }\n\n            isAuth();\n            console.log(isAuth());\n            jwt = response.data.token; //  let expire_at = response.data.expireAt;\n\n            localStorage.setItem(\"access_token\", jwt); //  localStorage.setItem(\"expire_at\", expire_at);\n\n            return _context.abrupt(\"return\", 'ok');\n\n          case 15:\n            return _context.abrupt(\"return\", response.data);\n\n          case 16:\n            _context.next = 21;\n            break;\n\n          case 18:\n            _context.prev = 18;\n            _context.t0 = _context[\"catch\"](2);\n            console.log(_context.t0);\n\n          case 21:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee, null, [[2, 18]]);\n  }));\n\n  return function login(_x) {\n    return _ref.apply(this, arguments);\n  };\n}();\n/*\nconst register = async (data) => {\n    const SIGNUP_ENDPOINT = `${SERVER_URL}/api/user/register`;\n    try {\n        let response = await axios({\n            method: 'post',\n            responseType: 'json',\n            url: SIGNUP_ENDPOINT,\n            data: data\n          });\n    } catch(e){\n        console.log(e);\n    }\n}*/\n\n\nvar logout = function logout() {\n  localStorage.removeItem(\"access_token\"); // localStorage.removeItem(\"expire_at\");\n};\n\nvar isAuth = function isAuth() {\n  if (window.localStorage.getItem('access_token') == null) {\n    return false;\n  }\n\n  return true;\n};\n\nexport { login, logout, isAuth, SERVER_URL, SERVER_URL2 };","map":{"version":3,"sources":["/home/cretrix/projects/React-blog/src/utils/JWTAuth.js"],"names":["axios","SERVER_URL","SERVER_URL2","login","data","LOGIN_ENDPOINT","console","log","post","response","success","status","isAuth","jwt","token","localStorage","setItem","logout","removeItem","window","getItem"],"mappings":";;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,IAAMC,UAAU,GAAG,uBAAnB;AACA,IAAMC,WAAW,GAAG,uBAApB;;AAEA,IAAMC,KAAK;AAAA;AAAA;AAAA;AAAA;AAAA,2BAAG,iBAAOC,IAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AACJC,YAAAA,cADI,aACgBH,WADhB;AAEVI,YAAAA,OAAO,CAACC,GAAR,CAAY,KAAZ;AAFU;AAAA;AAAA,mBAKeP,KAAK,CAACQ,IAAN,CAAWH,cAAX,EAA2BD,IAA3B,CALf;;AAAA;AAKFK,YAAAA,QALE;AAONH,YAAAA,OAAO,CAACC,GAAR,CAAYE,QAAQ,CAACL,IAAT,CAAcM,OAA1B,EAPM,CAQR;;AARQ,kBASHD,QAAQ,CAACE,MAAT,KAAoB,GAApB,IAA2BF,QAAQ,CAACL,IAAT,CAAcM,OAAd,KAAwB,IAThD;AAAA;AAAA;AAAA;;AAUFE,YAAAA,MAAM;AACNN,YAAAA,OAAO,CAACC,GAAR,CAAcK,MAAM,EAApB;AACIC,YAAAA,GAZF,GAYQJ,QAAQ,CAACL,IAAT,CAAcU,KAZtB,EAaJ;;AACAC,YAAAA,YAAY,CAACC,OAAb,CAAqB,cAArB,EAAqCH,GAArC,EAdI,CAiBJ;;AAjBI,6CAkBK,IAlBL;;AAAA;AAAA,6CAoBKJ,QAAQ,CAACL,IApBd;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAyBNE,YAAAA,OAAO,CAACC,GAAR;;AAzBM;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAH;;AAAA,kBAALJ,KAAK;AAAA;AAAA;AAAA,GAAX;AA6BA;;;;;;;;;;;;;;;;AAeA,IAAMc,MAAM,GAAG,SAATA,MAAS,GAAM;AACjBF,EAAAA,YAAY,CAACG,UAAb,CAAwB,cAAxB,EADiB,CAElB;AACF,CAHD;;AAKA,IAAMN,MAAM,GAAG,SAATA,MAAS,GAAM;AACjB,MAAIO,MAAM,CAACJ,YAAP,CAAoBK,OAApB,CAA4B,cAA5B,KAA6C,IAAjD,EAAuD;AACnD,WAAO,KAAP;AACH;;AACF,SAAO,IAAP;AACF,CALD;;AAQA,SAASjB,KAAT,EAAgBc,MAAhB,EAAwBL,MAAxB,EAAgCX,UAAhC,EAA4CC,WAA5C","sourcesContent":["import axios from 'axios';\nconst SERVER_URL = \"http://127.0.0.1:8000\";\nconst SERVER_URL2 = \"http://127.0.0.1:8000\"\n\nconst login = async (data) => {\n    const LOGIN_ENDPOINT = `${SERVER_URL2}/api/login`;\n    console.log('ddd');\n    try {\n\n        let response = await axios.post(LOGIN_ENDPOINT, data);\n      \n        console.log(response.data.success)\n      //  if(response.status === 200 && response.data.remember_token && response.data.expireAt){\n        if(response.status === 200 && response.data.success===true){\n            isAuth();\n            console.log(  isAuth())\n            let jwt = response.data.token;\n          //  let expire_at = response.data.expireAt;\n          localStorage.setItem(\"access_token\", jwt);\n        \n    \n          //  localStorage.setItem(\"expire_at\", expire_at);\n            return 'ok';\n        }else {\n            return response.data;\n        }\n\n\n    } catch(e){\n        console.log(e);\n    }\n}\n\n/*\nconst register = async (data) => {\n    const SIGNUP_ENDPOINT = `${SERVER_URL}/api/user/register`;\n    try {\n        let response = await axios({\n            method: 'post',\n            responseType: 'json',\n            url: SIGNUP_ENDPOINT,\n            data: data\n          });\n    } catch(e){\n        console.log(e);\n    }\n}*/\n\nconst logout = () => {\n    localStorage.removeItem(\"access_token\");\n   // localStorage.removeItem(\"expire_at\");\n}\n\nconst isAuth = () => {\n    if (window.localStorage.getItem('access_token')==null) {\n        return false;\n    }\n   return true;\n}\n\n\nexport { login, logout, isAuth, SERVER_URL, SERVER_URL2 }"]},"metadata":{},"sourceType":"module"}