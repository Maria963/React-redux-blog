{"ast":null,"code":"import _regeneratorRuntime from \"/home/cretrix/projects/React-blog/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/home/cretrix/projects/React-blog/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"/home/cretrix/projects/React-blog/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/cretrix/projects/React-blog/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/cretrix/projects/React-blog/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/cretrix/projects/React-blog/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/cretrix/projects/React-blog/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/cretrix/projects/React-blog/src/pages/edit-employee.component.js\";\nimport React, { Component } from 'react';\nimport axios from 'axios';\nimport { SERVER_URL, editEmployee } from \"../utils/JWTAuth.js\";\n\nvar UpdateEmployee =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(UpdateEmployee, _Component);\n\n  function UpdateEmployee(props) {\n    var _this;\n\n    _classCallCheck(this, UpdateEmployee);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(UpdateEmployee).call(this, props));\n\n    _this.onChangeEmployeeFirstname = function (e) {\n      _this.setState({\n        first_name: e.target.value,\n        success: '',\n        nameerror: ''\n      });\n    };\n\n    _this.onChangeEmployeeLastname = function (e) {\n      _this.setState({\n        last_name: e.target.value,\n        success: '',\n        lastnameerror: ''\n      });\n    };\n\n    _this.onChangeEmployeeEmail = function (e) {\n      _this.setState({\n        email: e.target.value,\n        success: ''\n      });\n    };\n\n    _this.onChangeEmployeePhone = function (e) {\n      _this.setState({\n        phone: e.target.value,\n        success: ''\n      });\n    };\n\n    _this.onChangeEmployeeCompany = function (e) {\n      _this.setState({\n        company_id: e.target.value,\n        success: ''\n      });\n    };\n\n    _this.onSubmit =\n    /*#__PURE__*/\n    function () {\n      var _ref = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee(e) {\n        var _this$state, first_name, last_name, company_id, email, phone, updateEmployee, employee_id, res;\n\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                e.preventDefault();\n                _this$state = _this.state, first_name = _this$state.first_name, last_name = _this$state.last_name, company_id = _this$state.company_id, email = _this$state.email, phone = _this$state.phone;\n                updateEmployee = {\n                  first_name: first_name,\n                  last_name: last_name,\n                  email: email,\n                  company_id: company_id,\n                  phone: phone\n                };\n                employee_id = _this.props.match.params.id;\n                _context.prev = 4;\n                _context.next = 7;\n                return editEmployee(employee_id, updateEmployee);\n\n              case 7:\n                res = _context.sent;\n\n                if (res.status === 200) {\n                  _this.setState({\n                    success: 'Employee updated'\n                  });\n                } else {\n                  _this.setState({\n                    nameerror: res.data.errors.first_name,\n                    lastnameerror: res.data.errors.last_name\n                  });\n                }\n\n                _context.next = 14;\n                break;\n\n              case 11:\n                _context.prev = 11;\n                _context.t0 = _context[\"catch\"](4);\n                console.log(_context.t0);\n\n              case 14:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, null, [[4, 11]]);\n      }));\n\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }();\n\n    _this.companiesList = function () {\n      var _this$state2 = _this.state,\n          companies = _this$state2.companies,\n          company_id = _this$state2.company_id;\n      console.log(companies);\n      return companies.map(function (company) {\n        return React.createElement(\"option\", {\n          value: company.id,\n          key: company.id,\n          selected: company_id === company.id ? 'selected' : '',\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 117\n          },\n          __self: this\n        }, company.name);\n      });\n    };\n\n    _this.state = {\n      first_name: '',\n      last_name: '',\n      company_id: '',\n      email: '',\n      phone: '',\n      errors: '',\n      nameerror: '',\n      lastnameerror: '',\n      success: '',\n      companies: []\n    };\n    return _this;\n  }\n\n  _createClass(UpdateEmployee, [{\n    key: \"componentDidMount\",\n    value: function () {\n      var _componentDidMount = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee2() {\n        var employee_id, response, employee;\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                employee_id = this.props.match.params.id;\n                _context2.prev = 1;\n                _context2.next = 4;\n                return getCompanies();\n\n              case 4:\n                response = _context2.sent;\n                _context2.next = 7;\n                return getEmployee(employee_id);\n\n              case 7:\n                employee = _context2.sent;\n\n                if (response.status === 200) {\n                  this.setState({\n                    companies: response.data\n                  });\n                }\n\n                if (employee.status === 200) {\n                  this.setState({\n                    first_name: employee.data.first_name == null ? '' : employee.data.first_name,\n                    last_name: employee.data.last_name == null ? '' : employee.data.last_name,\n                    company_id: employee.data.company_id == null ? '' : employee.data.company_id,\n                    email: employee.data.email == null ? '' : employee.data.email,\n                    phone: employee.data.phone == null ? '' : employee.data.phone\n                  });\n                }\n\n                _context2.next = 15;\n                break;\n\n              case 12:\n                _context2.prev = 12;\n                _context2.t0 = _context2[\"catch\"](1);\n                console.error(_context2.t0);\n\n              case 15:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this, [[1, 12]]);\n      }));\n\n      function componentDidMount() {\n        return _componentDidMount.apply(this, arguments);\n      }\n\n      return componentDidMount;\n    }()\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$state3 = this.state,\n          first_name = _this$state3.first_name,\n          last_name = _this$state3.last_name,\n          email = _this$state3.email,\n          phone = _this$state3.phone,\n          nameerror = _this$state3.nameerror,\n          lastnameerror = _this$state3.lastnameerror,\n          success = _this$state3.success;\n      return React.createElement(\"div\", {\n        style: {\n          marginTop: 10\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 124\n        },\n        __self: this\n      }, React.createElement(\"h3\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 125\n        },\n        __self: this\n      }, \"Update New Employee\"), React.createElement(\"form\", {\n        encType: \"multipart/form-data\",\n        onSubmit: this.onSubmit,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 126\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"invalid-feedback\",\n        style: {\n          display: 'block'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 127\n        },\n        __self: this\n      }, nameerror, React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 129\n        },\n        __self: this\n      }), lastnameerror), React.createElement(\"div\", {\n        className: \"form-group\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 132\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 133\n        },\n        __self: this\n      }, \"Firstname: \"), React.createElement(\"input\", {\n        type: \"text\",\n        className: \"form-control\",\n        value: first_name,\n        onChange: this.onChangeEmployeeFirstname,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 134\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"form-group\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 141\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 142\n        },\n        __self: this\n      }, \"Lastname:\"), React.createElement(\"input\", {\n        type: \"text\",\n        className: \"form-control\",\n        value: last_name,\n        onChange: this.onChangeEmployeeLastname,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 143\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"form-group\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 151\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 152\n        },\n        __self: this\n      }, \"Company name\"), React.createElement(\"select\", {\n        className: \"form-control\",\n        name: \"company_id\",\n        onChange: this.onChangeEmployeeCompany,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 153\n        },\n        __self: this\n      }, React.createElement(\"option\", {\n        value: \"\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 154\n        },\n        __self: this\n      }, \"Choose Company\"), this.companiesList())), React.createElement(\"div\", {\n        className: \"form-group\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 160\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 161\n        },\n        __self: this\n      }, \"Email\"), React.createElement(\"input\", {\n        type: \"text\",\n        className: \"form-control\",\n        value: email,\n        onChange: this.onChangeEmployeeEmail,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 162\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"form-group\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 172\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 173\n        },\n        __self: this\n      }, \"Phone: \"), React.createElement(\"input\", {\n        type: \"text\",\n        className: \"form-control\",\n        value: phone,\n        onChange: this.onChangeEmployeePhone,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 174\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"form-group\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 182\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        type: \"submit\",\n        value: \"Update Employee\",\n        className: \"btn btn-primary\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 183\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"valid-feedback\",\n        style: {\n          display: 'block'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 185\n        },\n        __self: this\n      }, success)));\n    }\n  }]);\n\n  return UpdateEmployee;\n}(Component);\n\nexport default UpdateEmployee;","map":{"version":3,"sources":["/home/cretrix/projects/React-blog/src/pages/edit-employee.component.js"],"names":["React","Component","axios","SERVER_URL","editEmployee","UpdateEmployee","props","onChangeEmployeeFirstname","e","setState","first_name","target","value","success","nameerror","onChangeEmployeeLastname","last_name","lastnameerror","onChangeEmployeeEmail","email","onChangeEmployeePhone","phone","onChangeEmployeeCompany","company_id","onSubmit","preventDefault","state","updateEmployee","employee_id","match","params","id","res","status","data","errors","console","log","companiesList","companies","map","company","name","getCompanies","response","getEmployee","employee","error","marginTop","display"],"mappings":"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","sourcesContent":["\nimport React, { Component } from 'react';\nimport axios from 'axios';\nimport {  SERVER_URL, editEmployee} from \"../utils/JWTAuth.js\";\n\n\nclass UpdateEmployee  extends Component {\n    constructor(props) {\n        super(props);\n\n        this.state = ({\n            first_name: '',\n            last_name: '',\n            company_id: '',\n            email: '',\n            phone: '',\n            errors: '',\n            nameerror: '',\n            lastnameerror: '',\n            success: '',\n            companies: []\n          })\n    }\n\n    async componentDidMount() {\n        let employee_id = this.props.match.params.id;\n        try {\n                \n            let response = await getCompanies();\n            let employee = await getEmployee(employee_id);\n            if (response.status===200) {\n                this.setState({ companies: response.data });\n            }\n            if (employee.status===200) {\n                this.setState({\n                    first_name:  employee.data.first_name == null ? '':  employee.data.first_name ,\n                    last_name: employee.data.last_name== null ? '':  employee.data.last_name ,\n                    company_id: employee.data.company_id== null ? '':  employee.data.company_id ,\n                    email:  employee.data.email== null ? '':  employee.data.email ,\n                    phone:  employee.data.phone==null ? '': employee.data.phone\n                })   \n            }\n            \n        } catch (error) {\n          console.error(error)\n       }\n    }\n\n  onChangeEmployeeFirstname = (e) => {\n        this.setState({\n            first_name: e.target.value, success: '', nameerror: '',\n        });\n    }\n\n    onChangeEmployeeLastname = (e) => {\n        this.setState({\n            last_name: e.target.value, success: '',  lastnameerror: '',\n        });\n    }\n\n    onChangeEmployeeEmail = (e) => {\n        this.setState({\n            email: e.target.value, success: ''\n        });\n    }\n\n    onChangeEmployeePhone = (e) => {\n        this.setState({\n            phone: e.target.value, success: ''\n        });\n    }\n\n    onChangeEmployeeCompany = (e) => {\n        this.setState({\n            company_id: e.target.value, success: ''\n        });\n    }\n\n    onSubmit = async (e) => {\n        e.preventDefault();\n        const {first_name, last_name, company_id, email, phone}  = this.state;\n\n        const updateEmployee = {\n            first_name,\n            last_name,\n            email,\n            company_id,\n            phone\n        };\n\n\n         let employee_id = this.props.match.params.id;\n\n         try {\n            let res = await editEmployee(employee_id, updateEmployee);\n            if (res.status===200) {\n              this.setState({\n                  success: 'Employee updated',\n              }); }\n           \n            else {\n              this.setState({\n                  nameerror: res.data.errors.first_name,\n                  lastnameerror: res.data.errors.last_name\n               })\n            }\n          }\n          catch (error) {\n              console.log(error);\n          }\n        }\n\n    companiesList = () => {\n        const { companies, company_id } = this.state;\n        console.log(companies);\n        return companies.map((company) => {\n            return <option value={company.id} key={company.id} selected = { company_id === company.id ? 'selected' : ''}>{company.name}</option>\n        })\n    }\n\n    render() {\n        const {first_name, last_name, email, phone, nameerror, lastnameerror, success} = this.state;\n        return (\n            <div style={{marginTop: 10}}>\n                <h3>Update New Employee</h3>\n                <form encType=\"multipart/form-data\" onSubmit={this.onSubmit}>\n                <div className=\"invalid-feedback\" style={{display: 'block'}}>\n                        {nameerror} \n                        <br/> \n                        {lastnameerror}\n                     </div>\n                    <div className=\"form-group\"> \n                        <label>Firstname: </label>\n                        <input \n                                type=\"text\" \n                                className=\"form-control\"\n                                value={first_name}\n                                onChange={this.onChangeEmployeeFirstname}\n                                />\n                    </div>\n                    <div className=\"form-group\">\n                        <label>Lastname:</label>\n                        <input \n                                type=\"text\" \n                                className=\"form-control\"\n                                value={last_name}\n                                onChange={this.onChangeEmployeeLastname}\n                                />\n                    </div>\n\n                    <div className=\"form-group\">\n                        <label>Company name</label>\n                        <select className=\"form-control\" name=\"company_id\" onChange={this.onChangeEmployeeCompany}>\n                        <option value=''>Choose Company</option>\n                                  {this.companiesList()}\n                        </select>\n                    </div>\n\n\n                    <div className=\"form-group\">\n                        <label>Email</label>\n                        <input \n                                type=\"text\" \n                                className=\"form-control\"\n                                value={email}\n                                onChange={this.onChangeEmployeeEmail}\n                                />\n                    </div>\n\n                    \n                    \n                    <div className=\"form-group\">\n                        <label>Phone: </label>\n                        <input \n                                type=\"text\" \n                                className=\"form-control\"\n                                value={phone}\n                                onChange={this.onChangeEmployeePhone}\n                                />\n                    </div>\n\n                    <div className=\"form-group\">\n                        <input type=\"submit\" value=\"Update Employee\" className=\"btn btn-primary\" />\n                    </div>\n                    <div className=\"valid-feedback\" style={{display: 'block'}}>\n                        {success}\n                     </div>\n                </form>\n            </div>\n        )\n    }\n}\n\nexport default UpdateEmployee;"]},"metadata":{},"sourceType":"module"}