{"ast":null,"code":"import _regeneratorRuntime from \"/home/cretrix/projects/React-blog/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/home/cretrix/projects/React-blog/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport axios from \"axios\";\nimport { func } from \"prop-types\";\nvar SERVER_URL = \"http://127.0.0.1:8000\";\nvar Auth = axios.create();\nAuth.interceptors.response.use(function (response) {\n  return response;\n}, function (error) {\n  if (error.response.status === 401) {\n    localStorage.removeItem(\"access_token\");\n    window.location.href = \"/login\";\n  }\n\n  throw error;\n});\n\nfunction getCompanies() {\n  try {\n    var res = Auth.get(SERVER_URL + \"/api/companies\", {\n      headers: {\n        Authorization: \"Bearer \".concat(localStorage.getItem(\"access_token\")),\n        \"Content-Type\": \"application/json\"\n      }\n    });\n    return res;\n  } catch (error) {\n    console.error(error);\n  }\n}\n\nfunction delCompany(id) {\n  try {\n    var res = Auth.delete(SERVER_URL + \"/api/companies/\" + id, {\n      headers: {\n        Authorization: \"Bearer \".concat(localStorage.getItem(\"access_token\")),\n        \"Content-Type\": \"application/json\"\n      }\n    });\n    return res;\n  } catch (error) {\n    console.error(error);\n  }\n}\n\nfunction createCompanies(_x) {\n  return _createCompanies.apply(this, arguments);\n}\n\nfunction _createCompanies() {\n  _createCompanies = _asyncToGenerator(\n  /*#__PURE__*/\n  _regeneratorRuntime.mark(function _callee(data) {\n    var res;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.prev = 0;\n            _context.next = 3;\n            return Auth.post(SERVER_URL + \"/api/companies\", data, {\n              headers: {\n                Authorization: \"Bearer \".concat(localStorage.getItem(\"access_token\")),\n                \"Content-Type\": \"application/json\"\n              }\n            });\n\n          case 3:\n            res = _context.sent;\n            return _context.abrupt(\"return\", res);\n\n          case 7:\n            _context.prev = 7;\n            _context.t0 = _context[\"catch\"](0);\n            return _context.abrupt(\"return\", _context.t0.response);\n\n          case 10:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee, null, [[0, 7]]);\n  }));\n  return _createCompanies.apply(this, arguments);\n}\n\nfunction editCompanies(_x2, _x3) {\n  return _editCompanies.apply(this, arguments);\n}\n\nfunction _editCompanies() {\n  _editCompanies = _asyncToGenerator(\n  /*#__PURE__*/\n  _regeneratorRuntime.mark(function _callee2(id, data) {\n    var res;\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            _context2.prev = 0;\n            _context2.next = 3;\n            return Auth.post(SERVER_URL + \"/api/companies/\" + id, data, {\n              headers: {\n                Authorization: \"Bearer \".concat(localStorage.getItem(\"access_token\")),\n                \"Content-Type\": \"application/json\"\n              }\n            });\n\n          case 3:\n            res = _context2.sent;\n            return _context2.abrupt(\"return\", res);\n\n          case 7:\n            _context2.prev = 7;\n            _context2.t0 = _context2[\"catch\"](0);\n            return _context2.abrupt(\"return\", _context2.t0.response);\n\n          case 10:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2, null, [[0, 7]]);\n  }));\n  return _editCompanies.apply(this, arguments);\n}\n\nfunction getCompany(_x4) {\n  return _getCompany.apply(this, arguments);\n}\n\nfunction _getCompany() {\n  _getCompany = _asyncToGenerator(\n  /*#__PURE__*/\n  _regeneratorRuntime.mark(function _callee3(id) {\n    var res;\n    return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            _context3.prev = 0;\n            _context3.next = 3;\n            return Auth.get(SERVER_URL + \"/api/companies/\" + id, {\n              headers: {\n                Authorization: \"Bearer \".concat(localStorage.getItem(\"access_token\")),\n                \"Content-Type\": \"application/json\"\n              }\n            });\n\n          case 3:\n            res = _context3.sent;\n            return _context3.abrupt(\"return\", res);\n\n          case 7:\n            _context3.prev = 7;\n            _context3.t0 = _context3[\"catch\"](0);\n            return _context3.abrupt(\"return\", _context3.t0.response);\n\n          case 10:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, _callee3, null, [[0, 7]]);\n  }));\n  return _getCompany.apply(this, arguments);\n}\n\nfunction getEmployees() {\n  try {\n    var res = Auth.get(SERVER_URL + \"/api/employees\", {\n      headers: {\n        Authorization: \"Bearer \".concat(localStorage.getItem(\"access_token\")),\n        \"Content-Type\": \"application/json\"\n      }\n    });\n    return res;\n  } catch (error) {\n    return error.response;\n  }\n}\n\nfunction delEmployee(id) {\n  try {\n    var res = Auth.delete(SERVER_URL + \"/api/employees/\" + id, {\n      headers: {\n        Authorization: \"Bearer \".concat(localStorage.getItem(\"access_token\")),\n        \"Content-Type\": \"application/json\"\n      }\n    });\n    console.log(res);\n    return res;\n  } catch (error) {}\n}\n\nfunction createEmployees(_x5) {\n  return _createEmployees.apply(this, arguments);\n}\n\nfunction _createEmployees() {\n  _createEmployees = _asyncToGenerator(\n  /*#__PURE__*/\n  _regeneratorRuntime.mark(function _callee4(data) {\n    var res;\n    return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n      while (1) {\n        switch (_context4.prev = _context4.next) {\n          case 0:\n            _context4.prev = 0;\n            _context4.next = 3;\n            return Auth.post(SERVER_URL + \"/api/employees\", data, {\n              headers: {\n                Authorization: \"Bearer \".concat(localStorage.getItem(\"access_token\")),\n                \"Content-Type\": \"application/json\"\n              }\n            });\n\n          case 3:\n            res = _context4.sent;\n            return _context4.abrupt(\"return\", res);\n\n          case 7:\n            _context4.prev = 7;\n            _context4.t0 = _context4[\"catch\"](0);\n            console.log(\"ddd\", _context4.t0.response);\n            return _context4.abrupt(\"return\", _context4.t0.response);\n\n          case 11:\n          case \"end\":\n            return _context4.stop();\n        }\n      }\n    }, _callee4, null, [[0, 7]]);\n  }));\n  return _createEmployees.apply(this, arguments);\n}\n\nfunction editEmployee(_x6, _x7) {\n  return _editEmployee.apply(this, arguments);\n}\n\nfunction _editEmployee() {\n  _editEmployee = _asyncToGenerator(\n  /*#__PURE__*/\n  _regeneratorRuntime.mark(function _callee5(id, data) {\n    var res;\n    return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n      while (1) {\n        switch (_context5.prev = _context5.next) {\n          case 0:\n            _context5.prev = 0;\n            _context5.next = 3;\n            return Auth.post(SERVER_URL + \"/api/employees/\" + id, data, {\n              headers: {\n                Authorization: \"Bearer \".concat(localStorage.getItem(\"access_token\")),\n                \"Content-Type\": \"application/json\"\n              }\n            });\n\n          case 3:\n            res = _context5.sent;\n            return _context5.abrupt(\"return\", res);\n\n          case 7:\n            _context5.prev = 7;\n            _context5.t0 = _context5[\"catch\"](0);\n            return _context5.abrupt(\"return\", _context5.t0.response);\n\n          case 10:\n          case \"end\":\n            return _context5.stop();\n        }\n      }\n    }, _callee5, null, [[0, 7]]);\n  }));\n  return _editEmployee.apply(this, arguments);\n}\n\nfunction getEmployee(_x8) {\n  return _getEmployee.apply(this, arguments);\n}\n\nfunction _getEmployee() {\n  _getEmployee = _asyncToGenerator(\n  /*#__PURE__*/\n  _regeneratorRuntime.mark(function _callee6(id) {\n    var res;\n    return _regeneratorRuntime.wrap(function _callee6$(_context6) {\n      while (1) {\n        switch (_context6.prev = _context6.next) {\n          case 0:\n            _context6.prev = 0;\n            _context6.next = 3;\n            return Auth.get(SERVER_URL + \"/api/employees/\" + id, {\n              headers: {\n                Authorization: \"Bearer \".concat(localStorage.getItem(\"access_token\")),\n                \"Content-Type\": \"application/json\"\n              }\n            });\n\n          case 3:\n            res = _context6.sent;\n            return _context6.abrupt(\"return\", res);\n\n          case 7:\n            _context6.prev = 7;\n            _context6.t0 = _context6[\"catch\"](0);\n            return _context6.abrupt(\"return\", _context6.t0.response);\n\n          case 10:\n          case \"end\":\n            return _context6.stop();\n        }\n      }\n    }, _callee6, null, [[0, 7]]);\n  }));\n  return _getEmployee.apply(this, arguments);\n}\n\nfunction login(_x9) {\n  return _login.apply(this, arguments);\n}\n/*\nconst register = async (data) => {\n    const SIGNUP_ENDPOINT = `${SERVER_URL}/api/user/register`;\n    try {\n        let response = await axios({\n            method: 'post',\n            responseType: 'json',\n            url: SIGNUP_ENDPOINT,\n            data: data\n          });\n    } catch(e){\n        console.log(e);\n    }\n}*/\n\n/*\nconst logout = (props) => {\n    localStorage.removeItem(\"access_token\");\n    props.history.push('/login');\n   // localStorage.removeItem(\"expire_at\");\n}\n*/\n\n\nfunction _login() {\n  _login = _asyncToGenerator(\n  /*#__PURE__*/\n  _regeneratorRuntime.mark(function _callee7(data) {\n    var LOGIN_ENDPOINT, response, jwt;\n    return _regeneratorRuntime.wrap(function _callee7$(_context7) {\n      while (1) {\n        switch (_context7.prev = _context7.next) {\n          case 0:\n            LOGIN_ENDPOINT = \"\".concat(SERVER_URL, \"/api/login\");\n            _context7.prev = 1;\n            _context7.next = 4;\n            return Auth.post(LOGIN_ENDPOINT, data);\n\n          case 4:\n            response = _context7.sent;\n            console.log(response); //  if(response.status === 200 && response.data.remember_token && response.data.expireAt){\n\n            if (response.status === 200 && response.data.success === true) {\n              jwt = response.data.token; //  let expire_at = response.data.expireAt;\n\n              localStorage.setItem(\"access_token\", jwt);\n            }\n\n            return _context7.abrupt(\"return\", response.data.success);\n\n          case 10:\n            _context7.prev = 10;\n            _context7.t0 = _context7[\"catch\"](1);\n            console.log(_context7.t0);\n\n          case 13:\n          case \"end\":\n            return _context7.stop();\n        }\n      }\n    }, _callee7, null, [[1, 10]]);\n  }));\n  return _login.apply(this, arguments);\n}\n\nvar isAuth = function isAuth() {\n  console.log(localStorage.getItem(\"access_token\"));\n\n  if (localStorage.getItem(\"access_token\") == null) {\n    return false;\n  }\n\n  return true;\n};\n\nexport { login, isAuth, SERVER_URL, Auth, getEmployee, editEmployee, createEmployees, delEmployee, getCompanies, delCompany, createCompanies, editCompanies, getEmployees, getCompany };","map":{"version":3,"sources":["/home/cretrix/projects/React-blog/src/utils/JWTAuth.js"],"names":["axios","func","SERVER_URL","Auth","create","interceptors","response","use","error","status","localStorage","removeItem","window","location","href","getCompanies","res","get","headers","Authorization","getItem","console","delCompany","id","delete","createCompanies","data","post","editCompanies","getCompany","getEmployees","delEmployee","log","createEmployees","editEmployee","getEmployee","login","LOGIN_ENDPOINT","success","jwt","token","setItem","isAuth"],"mappings":"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","sourcesContent":["import axios from \"axios\";\nimport { func } from \"prop-types\";\nconst SERVER_URL = \"http://127.0.0.1:8000\";\n\nconst Auth = axios.create();\n\nAuth.interceptors.response.use(\n  response => response,\n  error => {\n    if (error.response.status === 401) {\n      localStorage.removeItem(\"access_token\");\n      window.location.href = \"/login\";\n    }\n    throw error;\n  }\n);\n\nfunction getCompanies() {\n  try {\n    let res = Auth.get(SERVER_URL + \"/api/companies\", {\n      headers: {\n        Authorization: `Bearer ${localStorage.getItem(\"access_token\")}`,\n        \"Content-Type\": \"application/json\"\n      }\n    });\n    return res;\n  } catch (error) {\n    console.error(error);\n  }\n}\n\nfunction delCompany(id) {\n  try {\n    let res = Auth.delete(SERVER_URL + \"/api/companies/\" + id, {\n      headers: {\n        Authorization: `Bearer ${localStorage.getItem(\"access_token\")}`,\n        \"Content-Type\": \"application/json\"\n      }\n    });\n    return res;\n  } catch (error) {\n    console.error(error);\n  }\n}\n\nasync function createCompanies(data) {\n  try {\n    let res = await Auth.post(SERVER_URL + \"/api/companies\", data, {\n      headers: {\n        Authorization: `Bearer ${localStorage.getItem(\"access_token\")}`,\n        \"Content-Type\": \"application/json\"\n      }\n    });\n\n    return res;\n  } catch (error) {\n    return error.response;\n  }\n}\n\nasync function editCompanies(id, data) {\n  try {\n    let res = await Auth.post(SERVER_URL + \"/api/companies/\" + id, data, {\n      headers: {\n        Authorization: `Bearer ${localStorage.getItem(\"access_token\")}`,\n        \"Content-Type\": \"application/json\"\n      }\n    });\n    return res;\n  } catch (error) {\n    return error.response;\n  }\n}\n\nasync function getCompany(id) {\n  try {\n    let res = await Auth.get(SERVER_URL + \"/api/companies/\" + id, {\n      headers: {\n        Authorization: `Bearer ${localStorage.getItem(\"access_token\")}`,\n        \"Content-Type\": \"application/json\"\n      }\n    });\n    return res;\n  } catch (error) {\n    return error.response;\n  }\n}\n\nfunction getEmployees() {\n  try {\n    let res = Auth.get(SERVER_URL + \"/api/employees\", {\n      headers: {\n        Authorization: `Bearer ${localStorage.getItem(\"access_token\")}`,\n        \"Content-Type\": \"application/json\"\n      }\n    });\n    return res;\n  } catch (error) {\n    return error.response;\n  }\n}\n\nfunction delEmployee(id) {\n  try {\n    let res = Auth.delete(SERVER_URL + \"/api/employees/\" + id, {\n      headers: {\n        Authorization: `Bearer ${localStorage.getItem(\"access_token\")}`,\n        \"Content-Type\": \"application/json\"\n      }\n    });\n    console.log(res);\n    return res;\n  } catch (error) {}\n}\n\nasync function createEmployees(data) {\n  try {\n    let res = await Auth.post(SERVER_URL + \"/api/employees\", data, {\n      headers: {\n        Authorization: `Bearer ${localStorage.getItem(\"access_token\")}`,\n        \"Content-Type\": \"application/json\"\n      }\n    });\n\n    return res;\n  } catch (error) {\n    console.log(\"ddd\", error.response);\n    return error.response;\n  }\n}\n\nasync function editEmployee(id, data) {\n  try {\n    let res = await Auth.post(SERVER_URL + \"/api/employees/\" + id, data, {\n      headers: {\n        Authorization: `Bearer ${localStorage.getItem(\"access_token\")}`,\n        \"Content-Type\": \"application/json\"\n      }\n    });\n    return res;\n  } catch (error) {\n    return error.response;\n  }\n}\n\nasync function getEmployee(id) {\n  try {\n    let res = await Auth.get(SERVER_URL + \"/api/employees/\" + id, {\n      headers: {\n        Authorization: `Bearer ${localStorage.getItem(\"access_token\")}`,\n        \"Content-Type\": \"application/json\"\n      }\n    });\n    return res;\n  } catch (error) {\n    return error.response;\n  }\n}\n\nasync function login(data) {\n  const LOGIN_ENDPOINT = `${SERVER_URL}/api/login`;\n  try {\n    let response = await Auth.post(LOGIN_ENDPOINT, data);\n    console.log(response);\n    //  if(response.status === 200 && response.data.remember_token && response.data.expireAt){\n    if (response.status === 200 && response.data.success === true) {\n      let jwt = response.data.token;\n      //  let expire_at = response.data.expireAt;\n      localStorage.setItem(\"access_token\", jwt);\n    }\n    return response.data.success;\n  } catch (e) {\n    console.log(e);\n  }\n}\n\n/*\nconst register = async (data) => {\n    const SIGNUP_ENDPOINT = `${SERVER_URL}/api/user/register`;\n    try {\n        let response = await axios({\n            method: 'post',\n            responseType: 'json',\n            url: SIGNUP_ENDPOINT,\n            data: data\n          });\n    } catch(e){\n        console.log(e);\n    }\n}*/\n/*\nconst logout = (props) => {\n    localStorage.removeItem(\"access_token\");\n    props.history.push('/login');\n   // localStorage.removeItem(\"expire_at\");\n}\n*/\n\nconst isAuth = () => {\n  console.log(localStorage.getItem(\"access_token\"));\n  if (localStorage.getItem(\"access_token\") == null) {\n    return false;\n  }\n  return true;\n};\n\nexport {\n  login,\n  isAuth,\n  SERVER_URL,\n  Auth,\n  getEmployee,\n  editEmployee,\n  createEmployees,\n  delEmployee,\n  getCompanies,\n  delCompany,\n  createCompanies,\n  editCompanies,\n  getEmployees,\n  getCompany\n};\n"]},"metadata":{},"sourceType":"module"}